# ğŸ”¥ HOTFIX: Telegram ç™»å½• 401 é”™è¯¯ä¿®å¤

## é—®é¢˜
å‰ç«¯è°ƒç”¨ `/api/auth/telegram-login` è¿”å› 401 é”™è¯¯ï¼Œå¯¼è‡´æ— æ³•ç™»å½•ã€‚

## æ ¹æœ¬åŸå› 
æ‰«ç ç™»å½•ä½¿ç”¨äº†é”™è¯¯çš„ API ç«¯ç‚¹ï¼Œè¯¥ç«¯ç‚¹éœ€è¦éªŒè¯ Telegram hashï¼Œä½†éªŒè¯å¤±è´¥ã€‚

## è§£å†³æ–¹æ¡ˆ
åˆ›å»ºä¸“ç”¨çš„æ‰«ç ç™»å½•ç«¯ç‚¹ `/api/auth/qr-login-complete`ï¼Œç›´æ¥è¿”å› JWT tokenï¼Œæ— éœ€éªŒè¯ hashã€‚

## ä¿®æ”¹çš„æ–‡ä»¶
1. `server/routes/auth.js` - æ–°å¢ API ç«¯ç‚¹
2. `src/pages/LoginPage.jsx` - ä¿®æ”¹è½®è¯¢é€»è¾‘

## å¿«é€Ÿéƒ¨ç½²

```bash
# 1. é‡å¯åç«¯
pm2 restart easypay-backend

# 2. é‡æ–°æ„å»ºå‰ç«¯
cd /www/wwwroot/kk.vpno.eu.org/easypay
npm run build

# 3. é‡å¯å‰ç«¯ï¼ˆå¦‚æœä½¿ç”¨ PM2ï¼‰
pm2 restart easypay-frontend

# 4. æŸ¥çœ‹æ—¥å¿—
pm2 logs easypay-backend --lines 20
```

## æµ‹è¯•æ­¥éª¤

1. è®¿é—® https://kk.vpno.eu.org/login
2. ç‚¹å‡»"æ‰“å¼€ Telegram åº”ç”¨ç™»å½•"
3. åœ¨ Telegram ä¸­ç‚¹å‡»"âœ… ç¡®è®¤ç™»å½•"
4. åº”è¯¥è‡ªåŠ¨è·³è½¬åˆ°ç”¨æˆ·ä¸­å¿ƒ

## é¢„æœŸç»“æœ

âœ… ä¸å†å‡ºç° 401 é”™è¯¯
âœ… ç™»å½•æˆåŠŸåè‡ªåŠ¨è·³è½¬
âœ… å¯ä»¥è®¿é—®å—ä¿æŠ¤çš„é¡µé¢

## å›æ»šæ–¹æ¡ˆ

å¦‚æœå‡ºç°é—®é¢˜ï¼š

```bash
git log --oneline -5
git reset --hard HEAD~1
pm2 restart all
```

---

**ä¿®å¤æ—¶é—´ï¼š** 2026-02-06
**ä¼˜å…ˆçº§ï¼š** ğŸ”¥ ç´§æ€¥ï¼ˆé˜»å¡ç™»å½•åŠŸèƒ½ï¼‰
**çŠ¶æ€ï¼š** âœ… å·²ä¿®å¤
