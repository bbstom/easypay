# 钱包配置页面重构 - 详细步骤

## ⚠️ 重要提示
WalletConfigPage.jsx 文件似乎在操作过程中丢失了。请从 Git 恢复该文件后再进行以下修改。

## 恢复文件
```bash
git checkout src/pages/WalletConfigPage.jsx
```

## 修改步骤

### 1. AdminLayout.jsx - 修改标签名称 ✅ 已完成
**文件**: `src/components/AdminLayout.jsx`
**位置**: 第 39 行

**修改前**:
```javascript
{ id: 'resource', icon: <Zap size={18} />, label: '资源配置' }
```

**修改后**:
```javascript
{ id: 'energy', icon: <Zap size={18} />, label: '能量租赁' }
```

### 2. WalletConfigPage.jsx - 添加子标签状态 ✅ 已完成
**文件**: `src/pages/WalletConfigPage.jsx`
**位置**: 第 12-13 行

**修改前**:
```javascript
const currentTab = searchParams.get('tab') || 'status';
```

**修改后**:
```javascript
const currentTab = searchParams.get('tab') || 'status';
const currentSubTab = searchParams.get('subtab') || 'api';
```

### 3. WalletConfigPage.jsx - 重构基础配置标签
**文件**: `src/pages/WalletConfigPage.jsx`
**位置**: 约第 447 行开始的 `{/* 基础配置标签 */}` 部分

需要将整个基础配置部分替换为带子标签的版本。

#### 3.1 添加子标签导航
在 `{currentTab === 'basic' && (` 之后立即添加：

```jsx
{/* 基础配置标签 */}
{currentTab === 'basic' && (
  <>
    {/* 子标签导航 */}
    <div className="bg-white rounded-xl border border-slate-200 mb-6 overflow-hidden">
      <div className="flex border-b border-slate-200">
        <button
          onClick={() => setSearchParams({ tab: 'basic', subtab: 'api' })}
          className={`flex-1 px-6 py-4 text-sm font-bold transition-all ${
            currentSubTab === 'api'
              ? 'bg-[#00A3FF] text-white'
              : 'text-slate-600 hover:bg-slate-50'
          }`}
        >
          监控API配置
        </button>
        <button
          onClick={() => setSearchParams({ tab: 'basic', subtab: 'wallet' })}
          className={`flex-1 px-6 py-4 text-sm font-bold transition-all ${
            currentSubTab === 'wallet'
              ? 'bg-[#00A3FF] text-white'
              : 'text-slate-600 hover:bg-slate-50'
          }`}
        >
          钱包地址
        </button>
        <button
          onClick={() => setSearchParams({ tab: 'basic', subtab: 'transfer' })}
          className={`flex-1 px-6 py-4 text-sm font-bold transition-all ${
            currentSubTab === 'transfer'
              ? 'bg-[#00A3FF] text-white'
              : 'text-slate-600 hover:bg-slate-50'
          }`}
        >
          自动转账
        </button>
      </div>
    </div>
```

#### 3.2 拆分内容到子标签

**监控API配置子标签** (`currentSubTab === 'api'`):
- 包含原来的 API 节点配置部分
- 从 `<label className="text-sm font-bold text-slate-700 block mb-2">链上监控 API 节点配置</label>` 开始
- 到多节点策略说明结束
- 添加保存按钮

**钱包地址子标签** (`currentSubTab === 'wallet'`):
- 包含当前钱包地址显示
- 私钥输入和验证
- 测试连接功能
- 安全提示

**自动转账子标签** (`currentSubTab === 'transfer'`):
- 包含原来"转账配置"部分的所有内容
- 启用自动转账开关
- 最大重试次数
- TRX/USDT 最低余额预警
- 保存按钮

### 4. WalletConfigPage.jsx - 修改资源配置标签
**文件**: `src/pages/WalletConfigPage.jsx`
**位置**: 约第 642 行开始的 `{/* 资源配置标签 */}` 部分

**修改前**:
```javascript
{/* 资源配置标签 */}
{currentTab === 'resource' && (
```

**修改后**:
```javascript
{/* 能量租赁标签 */}
{currentTab === 'energy' && (
```

## 完整的基础配置标签结构示例

```jsx
{/* 基础配置标签 */}
{currentTab === 'basic' && (
  <>
    {/* 子标签导航 */}
    <div className="bg-white rounded-xl border border-slate-200 mb-6 overflow-hidden">
      <div className="flex border-b border-slate-200">
        {/* 三个子标签按钮 */}
      </div>
    </div>

    {/* 监控API配置 */}
    {currentSubTab === 'api' && (
      <div className="bg-white rounded-xl border border-slate-200 p-6 mb-6">
        <h2 className="text-xl font-black text-slate-900 mb-6">链上监控 API 节点配置</h2>
        {/* API 节点配置内容 */}
        {/* 保存按钮 */}
      </div>
    )}

    {/* 钱包地址 */}
    {currentSubTab === 'wallet' && (
      <div className="bg-white rounded-xl border border-slate-200 p-6 mb-6">
        <h2 className="text-xl font-black text-slate-900 mb-6">钱包地址配置</h2>
        {/* 钱包配置内容 */}
        {/* 保存和测试按钮 */}
        {/* 安全提示 */}
      </div>
    )}

    {/* 自动转账 */}
    {currentSubTab === 'transfer' && (
      <div className="bg-white rounded-xl border border-slate-200 p-6 mb-6">
        <h2 className="text-xl font-black text-slate-900 mb-6">自动转账配置</h2>
        {/* 转账配置内容 */}
        {/* 保存按钮 */}
      </div>
    )}
  </>
)}
```

## 测试清单

完成修改后，请测试以下功能：

- [ ] 状态监控标签正常显示
- [ ] 基础配置标签显示子标签导航
- [ ] 监控API配置子标签正常工作
- [ ] 钱包地址子标签正常工作
- [ ] 自动转账子标签正常工作
- [ ] 能量租赁标签（原资源配置）正常显示
- [ ] 所有保存功能正常
- [ ] 标签切换时 URL 参数正确更新

## 注意事项

1. 确保所有原有功能都保留
2. 保存按钮在每个子标签中都要有
3. 测试连接按钮只在"钱包地址"子标签中显示
4. 安全提示只在"钱包地址"子标签中显示
5. 多节点策略说明只在"监控API配置"子标签中显示

## 完成后

修改完成并测试通过后，可以继续进行多钱包系统阶段 2 的开发。
