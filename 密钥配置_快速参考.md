# 密钥配置 - 快速参考

## 需要配置的密钥

### 1. JWT_SECRET（必需）
- **用途**：用户登录令牌签名
- **长度**：32+ 字符
- **示例**：`JWT_SECRET=fastpay_secret_key_2024_secure_token`

### 2. ENCRYPTION_KEY（推荐）
- **用途**：钱包私钥加密
- **长度**：64+ 字符（128位十六进制）
- **示例**：`ENCRYPTION_KEY=abeb3843dce222ff...`

### 3. MASTER_KEY（不需要）
- **状态**：❌ 代码中未使用，可以删除

---

## 快速配置

```bash
# 1. 生成密钥
node server/scripts/generateStrongKey.js

# 2. 编辑 .env 文件
nano .env

# 3. 添加以下配置
JWT_SECRET=你的32字节密钥
ENCRYPTION_KEY=你的64字节密钥

# 4. 设置文件权限
chmod 600 .env

# 5. 重启服务
pm2 restart easypay-backend
```

---

## 配置优先级

```
ENCRYPTION_KEY（优先） → JWT_SECRET（备用） → 报错
```

如果只配置了 `JWT_SECRET`，系统会自动使用它来加密私钥。

---

## 推荐配置

```env
# 用户认证
JWT_SECRET=fastpay_secret_key_2024_secure_token

# 私钥加密（更强更安全）
ENCRYPTION_KEY=abeb3843dce222ff7ae426438ff5533d9d7729e63a3e92902f39b6d66ddb583863579498041afef8e8bd0a87c540017e7f25f680a8f83bdd3c939b5a48397820
```

---

## 安全提示

✅ **应该做**：
- 使用不同的密钥
- 使用足够长的密钥
- 定期轮换密钥
- 设置文件权限为 600
- 备份密钥到安全位置

❌ **不要做**：
- 使用相同的密钥
- 使用简单密码
- 将 .env 提交到 Git
- 在代码中硬编码密钥

---

## 查看详细说明

📖 `环境变量配置说明.md` - 完整的配置指南
