# Telegram Bot 功能测试清单

## 📋 测试前准备

### 1. 环境检查
- [ ] MongoDB 已启动
- [ ] 环境变量已配置（TELEGRAM_BOT_TOKEN）
- [ ] 服务器已启动
- [ ] Bot 已启动（查看日志：🤖 Telegram Bot 已启动）

### 2. 管理员账户
- [ ] 已创建管理员账户
- [ ] 可以登录管理后台
- [ ] 可以访问 Telegram 管理页面

## ✅ 基础功能测试

### 1. Bot 启动和欢迎
- [ ] 在 Telegram 中搜索 Bot
- [ ] 发送 `/start` 命令
- [ ] 收到欢迎消息
- [ ] 显示主菜单按钮

### 2. 主菜单
- [ ] 点击各个菜单按钮
- [ ] 按钮响应正常
- [ ] 可以返回主菜单

### 3. 用户认证
- [ ] 新用户自动创建账户
- [ ] 用户信息正确保存
- [ ] Session 正常工作

## 💰 代付功能测试

### 1. USDT 代付
- [ ] 点击"USDT 代付"按钮
- [ ] 输入金额
- [ ] 输入地址
- [ ] 显示确认信息
- [ ] 显示支付二维码
- [ ] 二维码美化正常（渐变背景、圆角）
- [ ] 可以查看订单状态

### 2. TRX 代付
- [ ] 点击"TRX 代付"按钮
- [ ] 输入金额
- [ ] 输入地址
- [ ] 显示确认信息
- [ ] 显示支付二维码
- [ ] 二维码美化正常

## 📋 订单管理测试

### 1. 订单列表
- [ ] 点击"我的订单"
- [ ] 显示订单列表
- [ ] 可以查看订单详情
- [ ] 订单状态正确

### 2. 订单详情
- [ ] 显示完整订单信息
- [ ] 可以刷新订单状态
- [ ] 可以返回列表

## 💬 工单系统测试

### 1. 创建工单
- [ ] 点击"工单系统"
- [ ] 点击"创建工单"
- [ ] 输入主题
- [ ] 输入描述
- [ ] 工单创建成功

### 2. 工单管理
- [ ] 查看工单列表
- [ ] 查看工单详情
- [ ] 回复工单
- [ ] 关闭工单

## ⚡ 能量租赁测试

### 1. 能量租赁页面
- [ ] 点击"能量租赁"按钮
- [ ] 显示价格信息
- [ ] 显示钱包地址
- [ ] 显示二维码（绿色主题）
- [ ] 二维码尺寸正确（160px）
- [ ] 可以返回主菜单

## 🔄 闪兑服务测试

### 1. 闪兑页面
- [ ] 点击"闪兑服务"按钮
- [ ] 显示实时汇率
- [ ] 显示钱包地址
- [ ] 显示二维码（蓝色主题）
- [ ] 可以刷新汇率
- [ ] 可以返回主菜单

## 🎛️ 管理后台测试

### 1. 主菜单配置
- [ ] 访问"主菜单设置"标签
- [ ] 查看当前菜单配置
- [ ] 添加新按钮
- [ ] 编辑按钮（文字、类型、功能）
- [ ] 调整按钮顺序（↑↓）
- [ ] 调整按钮位置（行、列）
- [ ] 预览效果正确
- [ ] 保存菜单
- [ ] Bot 中菜单已更新

### 2. 内容管理（CMS）
- [ ] 访问"内容管理"标签
- [ ] 查看内容列表
- [ ] 创建新内容
- [ ] 选择内容类型
- [ ] 输入内容（支持 HTML）
- [ ] 添加变量
- [ ] 添加按钮
- [ ] 保存内容
- [ ] 编辑已有内容
- [ ] 删除内容

### 3. 消息模板
- [ ] 访问"消息模板"标签
- [ ] 查看模板列表
- [ ] 创建新模板
- [ ] 选择模板类型
- [ ] 输入模板内容
- [ ] 添加按钮
- [ ] 保存模板
- [ ] 编辑模板
- [ ] 删除模板

### 4. 群发消息
- [ ] 访问"群发消息"标签
- [ ] 查看群发列表
- [ ] 创建新群发

#### 4.1 文本群发
- [ ] 选择"纯文本"类型
- [ ] 输入标题
- [ ] 输入内容（HTML 格式）
- [ ] 选择目标"所有用户"
- [ ] 保存为草稿
- [ ] 编辑草稿
- [ ] 发送群发
- [ ] 查看发送进度
- [ ] 查看统计数据

#### 4.2 图片群发
- [ ] 选择"图片"类型
- [ ] 输入媒体 URL
- [ ] 输入说明文字
- [ ] 选择目标用户
- [ ] 发送群发
- [ ] 用户收到图片消息

#### 4.3 群组群发
- [ ] 将 Bot 添加到测试群组
- [ ] 在群组中发送消息
- [ ] 刷新管理页面
- [ ] 查看群组列表
- [ ] 群组信息正确（名称、类型、状态）
- [ ] 创建群发消息
- [ ] 选择"群组"目标
- [ ] 勾选测试群组
- [ ] 发送群发
- [ ] 群组收到消息

### 5. 统计数据
- [ ] 访问"统计数据"标签
- [ ] 显示总用户数
- [ ] 显示今日新增
- [ ] 显示活跃用户
- [ ] 数据准确

## 🔧 高级功能测试

### 1. 群组自动检测
- [ ] 将 Bot 添加到新群组
- [ ] 在群组中发送消息
- [ ] 刷新管理页面
- [ ] 新群组自动出现在列表
- [ ] 群组信息正确
- [ ] 将 Bot 移除群组
- [ ] 群组状态更新为"left"

### 2. 限流控制
- [ ] 创建群发（目标：所有用户）
- [ ] 发送群发
- [ ] 查看日志
- [ ] 每批发送后暂停 1 秒
- [ ] 没有触发 Telegram 限流
- [ ] 如果触发限流，自动等待重试

### 3. 错误处理
- [ ] 发送到已屏蔽 Bot 的用户
- [ ] 系统自动跳过
- [ ] 记录被屏蔽数量
- [ ] 发送到无效 ID
- [ ] 系统自动跳过
- [ ] 记录错误日志

### 4. 富文本支持
- [ ] 发送 HTML 格式消息
- [ ] `<b>` 标签显示粗体
- [ ] `<i>` 标签显示斜体
- [ ] `<code>` 标签显示代码
- [ ] `<a>` 标签显示链接
- [ ] 发送 Markdown 格式消息
- [ ] 格式正确显示

## 🎨 UI/UX 测试

### 1. 二维码美化
- [ ] 二维码有渐变背景
- [ ] 二维码有圆角边框
- [ ] 不同场景不同颜色
- [ ] 尺寸统一（160px）
- [ ] 没有乱码

### 2. 按钮布局
- [ ] 按钮排列整齐
- [ ] 按钮文字清晰
- [ ] 按钮响应快速
- [ ] 返回按钮正常工作

### 3. 表单体验
- [ ] 表单字段清晰
- [ ] 输入验证正确
- [ ] 错误提示友好
- [ ] 保存反馈及时

## 📱 移动端测试

### 1. Telegram 移动端
- [ ] 所有功能正常
- [ ] 二维码显示正常
- [ ] 按钮可点击
- [ ] 文字可读

### 2. 管理后台移动端
- [ ] 页面响应式
- [ ] 表单可用
- [ ] 按钮可点击
- [ ] 滚动流畅

## 🔒 安全测试

### 1. 权限控制
- [ ] 非管理员无法访问管理页面
- [ ] API 需要认证
- [ ] Token 验证正常

### 2. 数据验证
- [ ] 输入验证正确
- [ ] SQL 注入防护
- [ ] XSS 防护

## 📊 性能测试

### 1. 响应速度
- [ ] Bot 响应快速（< 1秒）
- [ ] API 响应快速（< 500ms）
- [ ] 页面加载快速（< 2秒）

### 2. 并发测试
- [ ] 多用户同时使用
- [ ] 系统稳定
- [ ] 没有崩溃

### 3. 大量数据
- [ ] 群发 100+ 用户
- [ ] 系统稳定
- [ ] 发送成功率高

## 🐛 Bug 检查

### 常见问题
- [ ] 没有"未知操作"错误
- [ ] 没有 Session 丢失
- [ ] 没有重复消息
- [ ] 没有死循环
- [ ] 没有内存泄漏

## 📝 文档检查

### 1. 使用文档
- [ ] 文档完整
- [ ] 说明清晰
- [ ] 示例正确

### 2. API 文档
- [ ] 路由列表完整
- [ ] 参数说明清晰
- [ ] 返回值说明正确

## ✅ 测试结果

### 通过的测试
- 记录通过的测试项
- 记录测试时间
- 记录测试人员

### 发现的问题
- 记录问题描述
- 记录重现步骤
- 记录严重程度
- 记录修复状态

### 待优化项
- 记录优化建议
- 记录优先级
- 记录预计时间

## 🎉 测试完成

- [ ] 所有核心功能测试通过
- [ ] 所有高级功能测试通过
- [ ] 所有 UI/UX 测试通过
- [ ] 所有安全测试通过
- [ ] 所有性能测试通过
- [ ] 没有严重 Bug
- [ ] 系统可以上线

---

**测试日期**：__________
**测试人员**：__________
**测试环境**：__________
**测试结果**：□ 通过  □ 不通过
**备注**：__________
