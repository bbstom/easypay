# CatFee API æ•…éšœæ’æŸ¥æŒ‡å—

## ğŸ” å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

### 1. 502 Bad Gateway

**é”™è¯¯ä¿¡æ¯ï¼š**
```
âŒ CatFee æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ (502 Bad Gateway)
ğŸ’¡ æç¤ºï¼šè¿™é€šå¸¸æ˜¯æœåŠ¡å™¨ç»´æŠ¤æˆ–ä¸´æ—¶æ•…éšœï¼Œè¯·ç¨åé‡è¯•
```

**åŸå› ï¼š**
- CatFee æœåŠ¡å™¨æš‚æ—¶å®•æœº
- æœåŠ¡å™¨æ­£åœ¨ç»´æŠ¤
- ç½‘ç»œè¿æ¥é—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**
1. **ç­‰å¾…é‡è¯•**ï¼ˆæ¨èï¼‰
   ```bash
   # ç­‰å¾… 5-10 åˆ†é’Ÿåé‡è¯•
   node server/scripts/testCatfeeApi.js
   ```

2. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**
   - è®¿é—® https://nile.catfee.ioï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰
   - è®¿é—® https://catfee.ioï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
   - å¦‚æœç½‘ç«™ä¹Ÿæ‰“ä¸å¼€ï¼Œè¯´æ˜æœåŠ¡ç¡®å®åœ¨ç»´æŠ¤

3. **åˆ‡æ¢ç¯å¢ƒ**
   - å¦‚æœæµ‹è¯•ç¯å¢ƒä¸å¯ç”¨ï¼Œå°è¯•ç”Ÿäº§ç¯å¢ƒ
   - æ³¨æ„ï¼šç”Ÿäº§ç¯å¢ƒä¼šæ¶ˆè€—çœŸå® TRX

4. **è”ç³»å®¢æœ**
   - Telegram: @CatFee_James
   - å®˜æ–¹é¢‘é“: https://t.me/CatFeeOfficial

---

### 2. 503 Service Unavailable

**é”™è¯¯ä¿¡æ¯ï¼š**
```
âŒ CatFee æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ (503 Service Unavailable)
ğŸ’¡ æç¤ºï¼šæœåŠ¡å™¨è´Ÿè½½è¿‡é«˜æˆ–ç»´æŠ¤ä¸­ï¼Œè¯·ç¨åé‡è¯•
```

**åŸå› ï¼š**
- æœåŠ¡å™¨è´Ÿè½½è¿‡é«˜
- æ­£åœ¨è¿›è¡Œç»´æŠ¤
- ä¸´æ—¶æ€§æ•…éšœ

**è§£å†³æ–¹æ¡ˆï¼š**
- åŒ 502 é”™è¯¯çš„è§£å†³æ–¹æ¡ˆ

---

### 3. 401 Unauthorized

**é”™è¯¯ä¿¡æ¯ï¼š**
```
âŒ CatFee API è¯·æ±‚å¤±è´¥: 401 Unauthorized
```

**åŸå› ï¼š**
- API Key æˆ– API Secret é”™è¯¯
- API Key å·²è¢«ç¦ç”¨æˆ–åˆ é™¤
- ç­¾åéªŒè¯å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**

1. **æ£€æŸ¥é…ç½®**
   ```bash
   node server/scripts/showCatfeeConfig.js
   ```

2. **éªŒè¯æ ¼å¼**
   - ç¡®ä¿æ ¼å¼ä¸ºï¼š`api_key:api_secret`
   - ç¡®ä¿æ²¡æœ‰å¤šä½™çš„ç©ºæ ¼

3. **é‡æ–°è·å– API Key**
   - ç™»å½• CatFee åå°
   - è¿›å…¥ã€ä¸ªäººä¸­å¿ƒã€‘â†’ã€APIã€‘â†’ã€API é…ç½®ã€‘
   - æ£€æŸ¥ API Key çŠ¶æ€
   - å¦‚æœè¢«ç¦ç”¨ï¼Œé‡æ–°å¯ç”¨æˆ–åˆ›å»ºæ–°çš„

4. **æ£€æŸ¥ç¯å¢ƒåŒ¹é…**
   - æµ‹è¯•ç¯å¢ƒçš„ Key ä¸èƒ½ç”¨äºç”Ÿäº§ç¯å¢ƒ
   - ç”Ÿäº§ç¯å¢ƒçš„ Key ä¸èƒ½ç”¨äºæµ‹è¯•ç¯å¢ƒ

---

### 4. 404 Not Found

**é”™è¯¯ä¿¡æ¯ï¼š**
```
âŒ CatFee API è¯·æ±‚å¤±è´¥: 404 NOT_FOUND
```

**åŸå› ï¼š**
- API è·¯å¾„é”™è¯¯
- æ¥å£åœ¨å½“å‰ç¯å¢ƒä¸å¯ç”¨
- è®¢å•å·ä¸å­˜åœ¨

**è§£å†³æ–¹æ¡ˆï¼š**

1. **æ£€æŸ¥ API è·¯å¾„**
   - ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ API ç‰ˆæœ¬
   - å½“å‰ä½¿ç”¨ï¼š`/v1/order`

2. **ç¡®è®¤æ¥å£å¯ç”¨æ€§**
   - æŸäº›æ¥å£å¯èƒ½åªåœ¨ç”Ÿäº§ç¯å¢ƒå¯ç”¨
   - ä½™é¢å’Œä»·æ ¼æŸ¥è¯¢æ¥å£å¯èƒ½ä¸å¯ç”¨ï¼ˆæ­£å¸¸ï¼‰

3. **ä»è®¢å•å“åº”è·å–ä¿¡æ¯**
   - ä½™é¢ä¿¡æ¯ï¼šä»è´­ä¹°è®¢å•å“åº”ä¸­è·å–
   - ä»·æ ¼ä¿¡æ¯ï¼šä»è´­ä¹°è®¢å•å“åº”ä¸­è®¡ç®—

---

### 5. ç½‘ç»œè¶…æ—¶

**é”™è¯¯ä¿¡æ¯ï¼š**
```
âŒ CatFee API è¯·æ±‚å¤±è´¥: ETIMEDOUT
```

**åŸå› ï¼š**
- ç½‘ç»œè¿æ¥ä¸ç¨³å®š
- æœåŠ¡å™¨å“åº”æ…¢
- é˜²ç«å¢™é˜»æ­¢

**è§£å†³æ–¹æ¡ˆï¼š**

1. **æ£€æŸ¥ç½‘ç»œè¿æ¥**
   ```bash
   ping nile.catfee.io
   curl -I https://nile.catfee.io
   ```

2. **æ£€æŸ¥é˜²ç«å¢™**
   - ç¡®ä¿å…è®¸è®¿é—® catfee.io
   - æ£€æŸ¥æœåŠ¡å™¨å‡ºç«™è§„åˆ™

3. **å¢åŠ è¶…æ—¶æ—¶é—´**
   - å½“å‰è¶…æ—¶ï¼š30 ç§’
   - å¦‚éœ€è°ƒæ•´ï¼Œä¿®æ”¹ `catfeeService.js` ä¸­çš„ `timeout` å‚æ•°

---

## ğŸ”„ è‡ªåŠ¨é‡è¯•æœºåˆ¶

ç³»ç»Ÿå·²å†…ç½®è‡ªåŠ¨é‡è¯•åŠŸèƒ½ï¼š

### é‡è¯•ç­–ç•¥

- **é‡è¯•æ¬¡æ•°ï¼š** 3 æ¬¡
- **é‡è¯•é—´éš”ï¼š** é€’å¢ï¼ˆ2ç§’ã€4ç§’ã€6ç§’ï¼‰
- **é€‚ç”¨é”™è¯¯ï¼š** 502ã€503ã€ç½‘ç»œè¶…æ—¶

### é‡è¯•æ—¥å¿—

```
âš ï¸  è¯·æ±‚å¤±è´¥ (502)ï¼Œ2ç§’åé‡è¯•... (1/3)
âš ï¸  è¯·æ±‚å¤±è´¥ (502)ï¼Œ4ç§’åé‡è¯•... (2/3)
âŒ CatFee æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ (502 Bad Gateway)
```

### é…ç½®é‡è¯•

å¦‚éœ€è°ƒæ•´é‡è¯•å‚æ•°ï¼Œä¿®æ”¹ `catfeeService.js`ï¼š

```javascript
// ä¿®æ”¹é‡è¯•æ¬¡æ•°ï¼ˆé»˜è®¤ 3ï¼‰
async createRequest(url, method, timestamp, signature, retries = 5) {
  // ...
}

// ä¿®æ”¹ç­‰å¾…æ—¶é—´ï¼ˆé»˜è®¤ï¼šattempt * 2000ï¼‰
const waitTime = attempt * 3000; // 3s, 6s, 9s
```

---

## ğŸ“Š æ•…éšœè¯Šæ–­æµç¨‹

### æ­¥éª¤ 1ï¼šæŸ¥çœ‹é…ç½®

```bash
node server/scripts/showCatfeeConfig.js
```

**æ£€æŸ¥é¡¹ï¼š**
- [ ] API URL æ˜¯å¦æ­£ç¡®
- [ ] API Key æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆåŒ…å«å†’å·ï¼‰
- [ ] ç¯å¢ƒæ˜¯å¦åŒ¹é…

### æ­¥éª¤ 2ï¼šæµ‹è¯•è¿æ¥

```bash
# æµ‹è¯•ç½‘ç»œè¿æ¥
curl -I https://nile.catfee.io

# æµ‹è¯• APIï¼ˆä¸è´­ä¹°ï¼‰
node server/scripts/testCatfeeApi.js
```

### æ­¥éª¤ 3ï¼šæŸ¥çœ‹è¯¦ç»†æ—¥å¿—

è¿è¡Œæµ‹è¯•è„šæœ¬ä¼šæ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼š
- è¯·æ±‚ URL
- è¯·æ±‚å¤´
- å“åº”çŠ¶æ€
- é”™è¯¯è¯¦æƒ…

### æ­¥éª¤ 4ï¼šè”ç³»æ”¯æŒ

å¦‚æœé—®é¢˜æŒç»­å­˜åœ¨ï¼š

1. **æ”¶é›†ä¿¡æ¯**
   - é”™è¯¯ä¿¡æ¯æˆªå›¾
   - æµ‹è¯•æ—¶é—´
   - ä½¿ç”¨çš„ç¯å¢ƒï¼ˆæµ‹è¯•/ç”Ÿäº§ï¼‰
   - API Keyï¼ˆå‰8ä½ï¼‰

2. **è”ç³» CatFee**
   - Telegram: @CatFee_James
   - å®˜æ–¹é¢‘é“: https://t.me/CatFeeOfficial
   - é‚®ç®±ï¼šsupport@catfee.io

---

## ğŸ› ï¸ ç»´æŠ¤æ¨¡å¼æ£€æµ‹

### å¦‚ä½•åˆ¤æ–­æ˜¯å¦åœ¨ç»´æŠ¤

1. **è®¿é—®ç½‘ç«™**
   - https://nile.catfee.io
   - https://catfee.io

2. **æŸ¥çœ‹å®˜æ–¹å…¬å‘Š**
   - Telegram é¢‘é“ï¼šhttps://t.me/CatFeeOfficial
   - å®˜æ–¹ç½‘ç«™å…¬å‘Š

3. **é”™è¯¯ç‰¹å¾**
   - æŒç»­è¿”å› 502/503
   - ç½‘ç«™æ— æ³•è®¿é—®
   - æ‰€æœ‰ API éƒ½å¤±è´¥

### ç»´æŠ¤æœŸé—´çš„å¤„ç†

1. **ç­‰å¾…æ¢å¤**
   - é€šå¸¸ç»´æŠ¤æ—¶é—´ï¼š10-30 åˆ†é’Ÿ
   - é‡å¤§æ›´æ–°ï¼š1-2 å°æ—¶

2. **ä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ**
   - å¦‚æœé…ç½®äº†è½¬è´¦ç§Ÿèµæ¨¡å¼ï¼Œå¯ä»¥ä¸´æ—¶åˆ‡æ¢
   - æš‚åœè‡ªåŠ¨è´­ä¹°åŠŸèƒ½

3. **ç›‘æ§æ¢å¤**
   - å®šæœŸè¿è¡Œæµ‹è¯•è„šæœ¬
   - å…³æ³¨å®˜æ–¹å…¬å‘Š

---

## ğŸ“ é”™è¯¯ä»£ç é€ŸæŸ¥è¡¨

| é”™è¯¯ä»£ç  | å«ä¹‰ | ä¸¥é‡ç¨‹åº¦ | è§£å†³æ–¹æ¡ˆ |
|---------|------|---------|---------|
| 200 | æˆåŠŸ | âœ… æ­£å¸¸ | æ— éœ€å¤„ç† |
| 401 | æœªæˆæƒ | âš ï¸ é…ç½®é”™è¯¯ | æ£€æŸ¥ API Key |
| 404 | æœªæ‰¾åˆ° | â„¹ï¸ æ¥å£ä¸å¯ç”¨ | ä½¿ç”¨æ›¿ä»£æ–¹æ¡ˆ |
| 502 | ç½‘å…³é”™è¯¯ | ğŸ”´ æœåŠ¡æ•…éšœ | ç­‰å¾…æ¢å¤ |
| 503 | æœåŠ¡ä¸å¯ç”¨ | ğŸ”´ æœåŠ¡æ•…éšœ | ç­‰å¾…æ¢å¤ |
| ETIMEDOUT | è¶…æ—¶ | âš ï¸ ç½‘ç»œé—®é¢˜ | æ£€æŸ¥ç½‘ç»œ |
| ECONNREFUSED | è¿æ¥è¢«æ‹’ | ğŸ”´ æœåŠ¡æ•…éšœ | ç­‰å¾…æ¢å¤ |

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. é”™è¯¯å¤„ç†

```javascript
try {
  const result = await catfeeService.buyEnergy(address, 65000, '1h');
  console.log('è´­ä¹°æˆåŠŸ:', result);
} catch (error) {
  if (error.response?.status === 502 || error.response?.status === 503) {
    // æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œç¨åé‡è¯•
    console.log('æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œå°†åœ¨5åˆ†é’Ÿåé‡è¯•');
    setTimeout(() => retry(), 5 * 60 * 1000);
  } else if (error.response?.status === 401) {
    // API Key é”™è¯¯ï¼Œéœ€è¦äººå·¥å¤„ç†
    console.error('API Key é…ç½®é”™è¯¯ï¼Œè¯·æ£€æŸ¥é…ç½®');
    notifyAdmin('CatFee API Key é…ç½®é”™è¯¯');
  } else {
    // å…¶ä»–é”™è¯¯
    console.error('è´­ä¹°å¤±è´¥:', error.message);
  }
}
```

### 2. å¥åº·æ£€æŸ¥

å®šæœŸæ£€æŸ¥ API å¯ç”¨æ€§ï¼š

```javascript
// æ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡
setInterval(async () => {
  try {
    const result = await catfeeService.getBalance();
    if (result.success) {
      console.log('âœ… CatFee API æ­£å¸¸');
    }
  } catch (error) {
    console.error('âš ï¸ CatFee API å¼‚å¸¸:', error.message);
    notifyAdmin('CatFee API å¥åº·æ£€æŸ¥å¤±è´¥');
  }
}, 60 * 60 * 1000);
```

### 3. é™çº§ç­–ç•¥

å½“ API ä¸å¯ç”¨æ—¶çš„å¤‡ç”¨æ–¹æ¡ˆï¼š

```javascript
async function rentEnergy(address, amount) {
  try {
    // ä¼˜å…ˆä½¿ç”¨ CatFee API
    return await catfeeService.buyEnergy(address, amount, '1h');
  } catch (error) {
    if (error.response?.status === 502 || error.response?.status === 503) {
      // é™çº§åˆ°è½¬è´¦ç§Ÿèµæ¨¡å¼
      console.log('CatFee API ä¸å¯ç”¨ï¼Œåˆ‡æ¢åˆ°è½¬è´¦ç§Ÿèµæ¨¡å¼');
      return await transferRental(address, amount);
    }
    throw error;
  }
}
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### CatFee å®˜æ–¹

- **Telegram å®¢æœï¼š** @CatFee_James
- **å®˜æ–¹é¢‘é“ï¼š** https://t.me/CatFeeOfficial
- **æ–‡æ¡£ï¼š** https://docs.catfee.io
- **ç½‘ç«™ï¼š** https://catfee.io

### ç´§æ€¥è”ç³»

å¦‚é‡ç´§æ€¥é—®é¢˜ï¼š
1. å…ˆæŸ¥çœ‹å®˜æ–¹é¢‘é“æ˜¯å¦æœ‰å…¬å‘Š
2. è”ç³» Telegram å®¢æœ
3. å‘é€é‚®ä»¶åˆ° support@catfee.io

---

**æ›´æ–°æ—¥æœŸï¼š** 2026-02-03  
**ç‰ˆæœ¬ï¼š** v1.0
