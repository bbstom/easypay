# åŸŸåé…ç½®è¯´æ˜

## é—®é¢˜è¯´æ˜

ä¹‹å‰ç³»ç»Ÿä¸­çš„åŸŸåæ˜¯ç¡¬ç¼–ç çš„ï¼ˆ`https://dd.vpno.eu.org`ï¼‰ï¼Œå¯¼è‡´ï¼š
- æ›´æ¢åŸŸåéœ€è¦æ‰‹åŠ¨ä¿®æ”¹å¤šä¸ªæ–‡ä»¶
- æ„å»ºæ—¶æ— æ³•è‡ªåŠ¨é€‚é…æ–°åŸŸå
- Sitemap å’Œ SEO é…ç½®ä¸çµæ´»

## è§£å†³æ–¹æ¡ˆ

ç°åœ¨å·²ç»æ”¹ä¸ºä»ç¯å¢ƒå˜é‡è¯»å–åŸŸåï¼Œæ”¯æŒçµæ´»é…ç½®ã€‚

---

## é…ç½®æ–¹æ³•

### 1. åœ¨ .env æ–‡ä»¶ä¸­é…ç½®åŸŸå

æ‰“å¼€ `.env` æ–‡ä»¶ï¼Œæ·»åŠ æˆ–ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

```bash
# ç½‘ç«™åŸŸåï¼ˆç”¨äº SEOã€Sitemapã€OG æ ‡ç­¾ç­‰ï¼‰
SITE_URL=https://kk.vpno.eu.org

# å‰ç«¯URLï¼ˆç”¨äº CORS é…ç½®ï¼‰
FRONTEND_URL=https://kk.vpno.eu.org

# åº”ç”¨URLï¼ˆç”¨äºæ”¯ä»˜å›è°ƒï¼‰
APP_URL=https://kk.vpno.eu.org
```

**ä¼˜å…ˆçº§**ï¼š
1. `SITE_URL` - æœ€é«˜ä¼˜å…ˆçº§ï¼Œä¸“é—¨ç”¨äº SEO å’Œå‰ç«¯
2. `FRONTEND_URL` - æ¬¡ä¼˜å…ˆçº§
3. `APP_URL` - æœ€ä½ä¼˜å…ˆçº§
4. é»˜è®¤å€¼ï¼š`https://dd.vpno.eu.org`

### 2. æ„å»ºé¡¹ç›®

é…ç½®å®Œæˆåï¼Œè¿è¡Œæ„å»ºå‘½ä»¤ï¼š

```bash
npm run build
```

æ„å»ºè¿‡ç¨‹ä¼šè‡ªåŠ¨ï¼š
1. è¿è¡Œ `update-domain.js` - æ›´æ–° `index.html` ä¸­çš„åŸŸå
2. è¿è¡Œ `generate-sitemap.js` - ç”Ÿæˆ `sitemap.xml`

---

## è‡ªåŠ¨åŒ–æµç¨‹

### æ„å»ºæ—¶è‡ªåŠ¨æ›´æ–°

å½“ä½ è¿è¡Œ `npm run build` æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œï¼š

```bash
npm run prebuild
  â†“
npm run update-domain    # æ›´æ–° index.html ä¸­çš„åŸŸå
  â†“
npm run generate-sitemap # ç”Ÿæˆ sitemap.xml
  â†“
vite build              # æ„å»ºé¡¹ç›®
```

### æ›´æ–°çš„æ–‡ä»¶

**1. index.html**
- Open Graph URL
- Open Graph Image URL
- Twitter Card URL
- Twitter Card Image URL
- Canonical URL
- JSON-LD Schema URL

**2. public/sitemap.xml**
- æ‰€æœ‰é¡µé¢çš„ URL

**3. åå°ç”Ÿæˆçš„é™æ€é¡µé¢**
- SEO é¡µé¢çš„ URL
- Meta æ ‡ç­¾ä¸­çš„ URL

---

## æ‰‹åŠ¨æ›´æ–°åŸŸå

å¦‚æœéœ€è¦æ‰‹åŠ¨æ›´æ–°åŸŸåï¼ˆä¸æ„å»ºé¡¹ç›®ï¼‰ï¼š

### 1. æ›´æ–° index.html

```bash
node scripts/update-domain.js
```

### 2. æ›´æ–° sitemap.xml

```bash
npm run generate-sitemap
```

---

## éªŒè¯é…ç½®

### 1. æ£€æŸ¥ index.html

æ‰“å¼€ `index.html`ï¼Œæœç´¢åŸŸåï¼Œç¡®è®¤å·²æ›´æ–°ï¼š

```html
<meta property="og:url" content="https://kk.vpno.eu.org/" />
<meta property="og:image" content="https://kk.vpno.eu.org/og-image.jpg" />
<link rel="canonical" href="https://kk.vpno.eu.org/" />
```

### 2. æ£€æŸ¥ sitemap.xml

æ‰“å¼€ `public/sitemap.xml`ï¼Œç¡®è®¤åŸŸåæ­£ç¡®ï¼š

```xml
<loc>https://kk.vpno.eu.org/</loc>
<loc>https://kk.vpno.eu.org/services</loc>
```

### 3. éªŒè¯ sitemap

```bash
npm run verify-sitemap
```

---

## æ¶‰åŠçš„æ–‡ä»¶

### é…ç½®æ–‡ä»¶
- `.env` - ç¯å¢ƒå˜é‡é…ç½®
- `package.json` - æ„å»ºè„šæœ¬é…ç½®

### è„šæœ¬æ–‡ä»¶
- `scripts/update-domain.js` - åŸŸåæ›´æ–°è„šæœ¬ï¼ˆæ–°å¢ï¼‰
- `scripts/generate-sitemap.js` - Sitemap ç”Ÿæˆè„šæœ¬ï¼ˆå·²ä¿®æ”¹ï¼‰
- `scripts/verify-sitemap.js` - Sitemap éªŒè¯è„šæœ¬

### æºæ–‡ä»¶
- `index.html` - ä¸» HTML æ–‡ä»¶ï¼ˆæ„å»ºæ—¶è‡ªåŠ¨æ›´æ–°ï¼‰
- `public/sitemap.xml` - ç«™ç‚¹åœ°å›¾ï¼ˆæ„å»ºæ—¶è‡ªåŠ¨ç”Ÿæˆï¼‰
- `server/services/staticPageGenerator.js` - é™æ€é¡µé¢ç”Ÿæˆå™¨ï¼ˆå·²æ”¯æŒç¯å¢ƒå˜é‡ï¼‰

---

## å¸¸è§é—®é¢˜

### 1. æ„å»ºååŸŸåè¿˜æ˜¯æ—§çš„ï¼Ÿ

**åŸå› **ï¼š
- .env æ–‡ä»¶é…ç½®é”™è¯¯
- ç¼“å­˜é—®é¢˜

**è§£å†³æ–¹æ³•**ï¼š
```bash
# 1. æ£€æŸ¥ .env é…ç½®
cat .env | grep URL

# 2. æ¸…ç†ç¼“å­˜
rm -rf dist node_modules/.vite

# 3. é‡æ–°æ„å»º
npm run build
```

### 2. å¦‚ä½•æ”¯æŒå¤šä¸ªåŸŸåï¼Ÿ

**æ–¹æ³• 1ï¼šä½¿ç”¨ä¸åŒçš„ .env æ–‡ä»¶**

```bash
# ç”Ÿäº§ç¯å¢ƒ
.env.production
SITE_URL=https://kk.vpno.eu.org

# æµ‹è¯•ç¯å¢ƒ
.env.staging
SITE_URL=https://test.vpno.eu.org
```

**æ–¹æ³• 2ï¼šæ„å»ºæ—¶æŒ‡å®š**

```bash
SITE_URL=https://kk.vpno.eu.org npm run build
```

### 3. æœ¬åœ°å¼€å‘æ—¶åŸŸåæ˜¯ä»€ä¹ˆï¼Ÿ

æœ¬åœ°å¼€å‘æ—¶ï¼š
- ä½¿ç”¨ `localhost:5173`ï¼ˆVite å¼€å‘æœåŠ¡å™¨ï¼‰
- ä¸éœ€è¦é…ç½®åŸŸå
- æ„å»ºæ—¶æ‰ä¼šä½¿ç”¨é…ç½®çš„åŸŸå

### 4. åŸŸåé…ç½®ä¼šå½±å“ä»€ä¹ˆï¼Ÿ

**å½±å“çš„åŠŸèƒ½**ï¼š
- âœ… SEO Meta æ ‡ç­¾
- âœ… Open Graph æ ‡ç­¾
- âœ… Twitter Card æ ‡ç­¾
- âœ… Sitemap.xml
- âœ… Canonical URL
- âœ… JSON-LD Schema

**ä¸å½±å“çš„åŠŸèƒ½**ï¼š
- âŒ API è¯·æ±‚ï¼ˆä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼‰
- âŒ è·¯ç”±è·³è½¬ï¼ˆä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼‰
- âŒ é™æ€èµ„æºï¼ˆä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼‰

---

## éƒ¨ç½²æµç¨‹

### æ ‡å‡†éƒ¨ç½²æµç¨‹

```bash
# 1. æ›´æ–°ä»£ç 
git pull

# 2. å®‰è£…ä¾èµ–
npm install

# 3. é…ç½®åŸŸåï¼ˆå¦‚æœæ˜¯æ–°æœåŠ¡å™¨ï¼‰
vim .env
# æ·»åŠ æˆ–ä¿®æ”¹ SITE_URL

# 4. æ„å»ºé¡¹ç›®
npm run build

# 5. é‡å¯æœåŠ¡
pm2 restart easypay
```

### å¿«é€Ÿéƒ¨ç½²è„šæœ¬

åˆ›å»º `deploy.sh`ï¼š

```bash
#!/bin/bash

echo "ğŸš€ å¼€å§‹éƒ¨ç½²..."

# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®ï¼ˆè‡ªåŠ¨æ›´æ–°åŸŸåå’Œç”Ÿæˆ sitemapï¼‰
npm run build

# é‡å¯æœåŠ¡
pm2 restart easypay

echo "âœ… éƒ¨ç½²å®Œæˆï¼"
```

ä½¿ç”¨ï¼š
```bash
chmod +x deploy.sh
./deploy.sh
```

---

## æœ€ä½³å®è·µ

### 1. ç¯å¢ƒå˜é‡ç®¡ç†

**æ¨èç»“æ„**ï¼š
```
.env                 # æœ¬åœ°å¼€å‘ï¼ˆä¸æäº¤åˆ° Gitï¼‰
.env.example         # ç¤ºä¾‹é…ç½®ï¼ˆæäº¤åˆ° Gitï¼‰
.env.production      # ç”Ÿäº§ç¯å¢ƒï¼ˆæœåŠ¡å™¨ä¸Šï¼‰
.env.staging         # æµ‹è¯•ç¯å¢ƒï¼ˆæµ‹è¯•æœåŠ¡å™¨ï¼‰
```

### 2. åŸŸåé…ç½®æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰æ£€æŸ¥ï¼š
- [ ] .env æ–‡ä»¶ä¸­é…ç½®äº†æ­£ç¡®çš„åŸŸå
- [ ] åŸŸåæ ¼å¼æ­£ç¡®ï¼ˆhttps://å¼€å¤´ï¼‰
- [ ] åŸŸåå¯ä»¥æ­£å¸¸è®¿é—®
- [ ] DNS è§£ææ­£ç¡®
- [ ] SSL è¯ä¹¦æœ‰æ•ˆ

### 3. æ„å»ºéªŒè¯

æ„å»ºåéªŒè¯ï¼š
- [ ] index.html ä¸­çš„åŸŸåæ­£ç¡®
- [ ] sitemap.xml ä¸­çš„åŸŸåæ­£ç¡®
- [ ] è¿è¡Œ `npm run verify-sitemap` æ— é”™è¯¯
- [ ] æµè§ˆå™¨è®¿é—®ç½‘ç«™æ­£å¸¸
- [ ] ç¤¾äº¤åª’ä½“åˆ†äº«é¢„è§ˆæ­£å¸¸

---

## æ€»ç»“

ç°åœ¨ç³»ç»Ÿå·²ç»æ”¯æŒçµæ´»çš„åŸŸåé…ç½®ï¼š

**ä¼˜ç‚¹**ï¼š
- âœ… ä¸€å¤„é…ç½®ï¼Œå…¨å±€ç”Ÿæ•ˆ
- âœ… æ„å»ºæ—¶è‡ªåŠ¨æ›´æ–°
- âœ… æ”¯æŒå¤šç¯å¢ƒéƒ¨ç½²
- âœ… é¿å…ç¡¬ç¼–ç é—®é¢˜

**ä½¿ç”¨æ–¹æ³•**ï¼š
1. åœ¨ .env ä¸­é…ç½® `SITE_URL`
2. è¿è¡Œ `npm run build`
3. è‡ªåŠ¨å®Œæˆæ‰€æœ‰æ›´æ–°

**æ³¨æ„äº‹é¡¹**ï¼š
- ä¿®æ”¹åŸŸååå¿…é¡»é‡æ–°æ„å»º
- ç¡®ä¿ .env æ–‡ä»¶ä¸è¦æäº¤åˆ° Git
- éƒ¨ç½²åˆ°æ–°æœåŠ¡å™¨æ—¶è®°å¾—é…ç½®åŸŸå

---

**ç›¸å…³å‘½ä»¤**ï¼š
```bash
# æ‰‹åŠ¨æ›´æ–°åŸŸå
node scripts/update-domain.js

# ç”Ÿæˆ sitemap
npm run generate-sitemap

# éªŒè¯ sitemap
npm run verify-sitemap

# å®Œæ•´æ„å»º
npm run build
```
