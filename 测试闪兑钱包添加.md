# 闪兑钱包界面优化 - 测试指南

## ✅ 已完成功能

### 1. 菜单更新
- ✅ "钱包管理" 已改为 "代付钱包"
- ✅ 闪兑系统菜单包含 "闪兑钱包" 子项

### 2. 闪兑钱包两列显示
- ✅ 钱包列表使用 `grid-cols-1 md:grid-cols-2` 两列网格布局
- ✅ 卡片样式紧凑，包含钱包名称、地址、状态、优先级
- ✅ 悬停效果：`hover:border-cyan-300 hover:shadow-md`
- ✅ 点击卡片可查看详情

### 3. 钱包详情页面
- ✅ 基本信息：名称、地址、状态、优先级、创建时间
- ✅ 地址复制功能
- ✅ 启用/禁用按钮
- ✅ 删除钱包按钮
- ✅ 返回列表按钮

### 4. 私钥验证修复
- ✅ 使用与代付系统相同的 `walletService.validatePrivateKey()`
- ✅ 私钥加密使用 `encryptPrivateKey(privateKey, getMasterKey())`
- ✅ 支持多种私钥格式（标准64位、带0x前缀、带空格）

## 🧪 测试步骤

### 测试1: 查看钱包列表
1. 登录管理后台
2. 点击 "闪兑系统" → "闪兑钱包"
3. **预期结果**：
   - 钱包以两列网格显示（桌面端）
   - 移动端显示单列
   - 每个卡片显示钱包基本信息

### 测试2: 添加闪兑钱包
1. 点击 "添加钱包" 按钮
2. 填写钱包信息：
   - 钱包名称：测试闪兑钱包
   - 私钥：（使用有效的TRON私钥）
   - 优先级：50
3. 点击 "添加钱包"
4. **预期结果**：
   - 显示 "闪兑钱包添加成功！"
   - 返回钱包列表
   - 新钱包出现在列表中

### 测试3: 查看钱包详情
1. 在钱包列表中点击任意钱包卡片
2. **预期结果**：
   - 进入钱包详情页面
   - 显示完整的钱包信息
   - 可以复制地址
   - 可以启用/禁用钱包
   - 可以删除钱包

### 测试4: 启用/禁用钱包
1. 在钱包详情页面点击 "禁用钱包" 或 "启用钱包"
2. **预期结果**：
   - 钱包状态立即更新
   - 返回列表后状态正确显示

### 测试5: 删除钱包
1. 在钱包详情页面点击 "删除钱包"
2. 确认删除
3. **预期结果**：
   - 显示 "删除成功"
   - 返回钱包列表
   - 钱包已从列表中移除

### 测试6: 私钥格式验证
测试以下私钥格式是否都能正常添加：
- 标准64位十六进制
- 带 `0x` 前缀
- 带空格
- 大小写混合

## 📋 对比代付钱包

### 相同功能
- ✅ 两列网格布局
- ✅ 点击卡片查看详情
- ✅ 详情页面显示完整信息
- ✅ 启用/禁用开关
- ✅ 删除功能
- ✅ 私钥验证和加密方式

### 差异
- 代付钱包：显示余额、资源、使用统计
- 闪兑钱包：仅显示基本信息（因为闪兑钱包不需要实时监控余额）

## 🔧 技术实现

### 关键代码位置
- **前端页面**: `src/pages/SwapSystemPage.jsx`
- **后端路由**: `server/routes/swap.js`
- **服务层**: `server/services/swapService.js`
- **菜单配置**: `src/components/AdminLayout.jsx`

### 状态管理
```javascript
const [selectedSwapWallet, setSelectedSwapWallet] = useState(null);
const [showAddSwapWallet, setShowAddSwapWallet] = useState(false);
```

### 布局样式
```javascript
<div className="grid grid-cols-1 md:grid-cols-2 gap-4">
  {swapWallets.map((wallet) => (
    <div 
      className="border border-slate-200 rounded-xl p-5 cursor-pointer hover:border-cyan-300 hover:shadow-md transition-all"
      onClick={() => handleViewSwapWallet(wallet)}
    >
      {/* 钱包卡片内容 */}
    </div>
  ))}
</div>
```

## ⚠️ 注意事项

1. **私钥安全**：私钥使用 masterKey 加密存储，绝不明文保存
2. **地址验证**：添加钱包时会验证私钥并生成地址
3. **优先级**：系统按优先级选择钱包（数值越大优先级越高）
4. **工作流程**：用户转 USDT 到哪个钱包，TRX 就从那个钱包返回

## 📝 下一步

如需测试，请：
1. 启动开发服务器
2. 登录管理后台
3. 按照上述测试步骤逐一验证功能
4. 如有问题，请提供具体的错误信息或截图
