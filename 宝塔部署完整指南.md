# å®å¡”é¢æ¿éƒ¨ç½²å®Œæ•´æŒ‡å—

## ğŸ“‹ éƒ¨ç½²æ¶æ„

```
ç”¨æˆ·æµè§ˆå™¨
    â†“
å®å¡” Nginx (åå‘ä»£ç†)
  - é™æ€æ–‡ä»¶: /www/wwwroot/your-domain/dist
  - API ä»£ç†: â†’ http://127.0.0.1:3000
    â†“
PM2 (è¿›ç¨‹ç®¡ç†)
  - è¿è¡Œæ–‡ä»¶: server/index.js
  - ç«¯å£: 3000
    â†“
MongoDB (æ•°æ®åº“)
  - ç«¯å£: 27017
```

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1ï¼šå‡†å¤‡æœåŠ¡å™¨ç¯å¢ƒ

#### 1.1 å®‰è£…å®å¡”é¢æ¿

å¦‚æœè¿˜æ²¡æœ‰å®‰è£…å®å¡”ï¼š

```bash
# CentOS å®‰è£…å‘½ä»¤
yum install -y wget && wget -O install.sh https://download.bt.cn/install/install_6.0.sh && sh install.sh ed8484bec

# Ubuntu/Debian å®‰è£…å‘½ä»¤
wget -O install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh && sudo bash install.sh ed8484bec
```

å®‰è£…å®Œæˆåï¼Œè®°å½•ï¼š
- å®å¡”é¢æ¿åœ°å€
- ç”¨æˆ·å
- å¯†ç 

#### 1.2 ç™»å½•å®å¡”é¢æ¿

è®¿é—®ï¼š`http://your-server-ip:8888`

é¦–æ¬¡ç™»å½•ä¼šæç¤ºå®‰è£…è½¯ä»¶ï¼Œé€‰æ‹©ï¼š
- âœ… Nginx 1.22+
- âœ… MySQL 5.7+ æˆ– MongoDB 4.4+
- âœ… PM2 ç®¡ç†å™¨
- âœ… Node.js 18.x

---

### æ­¥éª¤ 2ï¼šå®‰è£…å¿…è¦è½¯ä»¶

#### 2.1 å®‰è£… Node.js

1. ç‚¹å‡»å·¦ä¾§"è½¯ä»¶å•†åº—"
2. æœç´¢"Node ç‰ˆæœ¬ç®¡ç†å™¨"
3. å®‰è£…"Node ç‰ˆæœ¬ç®¡ç†å™¨"
4. å®‰è£…åï¼Œç‚¹å‡»"è®¾ç½®"
5. å®‰è£… Node.js 18.x ç‰ˆæœ¬

#### 2.2 å®‰è£… MongoDB

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨å®å¡” MongoDBï¼ˆæ¨èï¼‰**

1. ç‚¹å‡»"è½¯ä»¶å•†åº—"
2. æœç´¢"MongoDB"
3. å®‰è£…"MongoDB 4.4"æˆ–æ›´é«˜ç‰ˆæœ¬
4. å®‰è£…å®Œæˆåï¼Œç‚¹å‡»"è®¾ç½®"
5. è®°å½•è¿æ¥ä¿¡æ¯

**æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å®‰è£…**

```bash
# CentOS
sudo yum install -y mongodb-org

# Ubuntu
sudo apt install -y mongodb
```

#### 2.3 å®‰è£… PM2 ç®¡ç†å™¨

1. ç‚¹å‡»"è½¯ä»¶å•†åº—"
2. æœç´¢"PM2 ç®¡ç†å™¨"
3. ç‚¹å‡»"å®‰è£…"

---

### æ­¥éª¤ 3ï¼šä¸Šä¼ é¡¹ç›®ä»£ç 

#### 3.1 åˆ›å»ºç½‘ç«™ç›®å½•

1. ç‚¹å‡»å·¦ä¾§"ç½‘ç«™"
2. ç‚¹å‡»"æ·»åŠ ç«™ç‚¹"
3. å¡«å†™ä¿¡æ¯ï¼š
   - åŸŸåï¼š`your-domain.com`
   - æ ¹ç›®å½•ï¼š`/www/wwwroot/your-domain`
   - PHP ç‰ˆæœ¬ï¼šçº¯é™æ€
4. ç‚¹å‡»"æäº¤"

#### 3.2 ä¸Šä¼ ä»£ç 

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨å®å¡”æ–‡ä»¶ç®¡ç†å™¨**

1. ç‚¹å‡»å·¦ä¾§"æ–‡ä»¶"
2. è¿›å…¥ `/www/wwwroot/your-domain`
3. ç‚¹å‡»"ä¸Šä¼ "
4. ä¸Šä¼ é¡¹ç›®å‹ç¼©åŒ…
5. è§£å‹

**æ–¹æ³•äºŒï¼šä½¿ç”¨ Gitï¼ˆæ¨èï¼‰**

1. ç‚¹å‡»å·¦ä¾§"ç»ˆç«¯"
2. æ‰§è¡Œå‘½ä»¤ï¼š

```bash
cd /www/wwwroot
git clone <your-repo-url> your-domain
cd your-domain
```

#### 3.3 è®¾ç½®ç›®å½•æƒé™

```bash
cd /www/wwwroot/your-domain
chmod -R 755 .
chown -R www:www .
```

---

### æ­¥éª¤ 4ï¼šé…ç½®ç¯å¢ƒå˜é‡

#### 4.1 åˆ›å»º .env æ–‡ä»¶

1. ç‚¹å‡»å·¦ä¾§"æ–‡ä»¶"
2. è¿›å…¥ `/www/wwwroot/your-domain`
3. ç‚¹å‡»"æ–°å»ºæ–‡ä»¶"ï¼Œæ–‡ä»¶åï¼š`.env`
4. ç¼–è¾‘å†…å®¹ï¼š

```env
# ç¯å¢ƒ
NODE_ENV=production

# æœåŠ¡å™¨é…ç½®
PORT=3000

# MongoDB é…ç½®
MONGODB_URI=mongodb://localhost:27017/easypay

# JWT å¯†é’¥ï¼ˆå¿…é¡»ä¿®æ”¹ä¸ºéšæœºå­—ç¬¦ä¸²ï¼ï¼‰
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# ä¸»å¯†é’¥ï¼ˆç”¨äºåŠ å¯†é’±åŒ…ç§é’¥ï¼Œå¿…é¡»ä¿®æ”¹ä¸ºéšæœºå­—ç¬¦ä¸²ï¼ï¼‰
MASTER_KEY=your-super-secret-master-key-change-this-in-production

# å‰ç«¯ URLï¼ˆä¿®æ”¹ä¸ºä½ çš„åŸŸåï¼‰
FRONTEND_URL=https://your-domain.com

# æ”¯ä»˜å›è°ƒ URLï¼ˆä¿®æ”¹ä¸ºä½ çš„åŸŸåï¼‰
PAYMENT_CALLBACK_URL=https://your-domain.com/api/payments/notify
```

**ç”Ÿæˆå®‰å…¨å¯†é’¥ï¼š**

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
# ç”Ÿæˆ JWT_SECRET
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# ç”Ÿæˆ MASTER_KEY
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
```

å°†ç”Ÿæˆçš„å¯†é’¥å¤åˆ¶åˆ° .env æ–‡ä»¶ä¸­ã€‚

---

### æ­¥éª¤ 5ï¼šå®‰è£…ä¾èµ–å’Œæ„å»º

#### 5.1 å®‰è£… Node.js ä¾èµ–

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /www/wwwroot/your-domain

# å®‰è£…ä¾èµ–
npm install --production

# æˆ–ä½¿ç”¨ cnpmï¼ˆå›½å†…æ›´å¿«ï¼‰
npm install -g cnpm --registry=https://registry.npmmirror.com
cnpm install --production
```

#### 5.2 æ„å»ºå‰ç«¯

```bash
cd /www/wwwroot/your-domain

# æ„å»ºå‰ç«¯
npm run build
```

æ„å»ºå®Œæˆåï¼Œä¼šç”Ÿæˆ `dist` ç›®å½•ã€‚

---

### æ­¥éª¤ 6ï¼šåˆå§‹åŒ–æ•°æ®åº“

```bash
cd /www/wwwroot/your-domain

# è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
node server/scripts/initDatabase.js
```

æŒ‰æç¤ºè¾“å…¥ï¼š
- ç®¡ç†å‘˜ç”¨æˆ·åï¼ˆé»˜è®¤ï¼šadminï¼‰
- ç®¡ç†å‘˜é‚®ç®±
- ç®¡ç†å‘˜å¯†ç 
- ç½‘ç«™åç§°

---

### æ­¥éª¤ 7ï¼šé…ç½® PM2

#### 7.1 ä½¿ç”¨å®å¡” PM2 ç®¡ç†å™¨ï¼ˆæ¨èï¼‰

1. ç‚¹å‡»å·¦ä¾§"è½¯ä»¶å•†åº—"
2. æ‰¾åˆ°"PM2 ç®¡ç†å™¨"ï¼Œç‚¹å‡»"è®¾ç½®"
3. ç‚¹å‡»"æ·»åŠ é¡¹ç›®"
4. å¡«å†™ä¿¡æ¯ï¼š
   - **é¡¹ç›®åç§°ï¼š** `easypay-backend`
   - **å¯åŠ¨æ–‡ä»¶ï¼š** `/www/wwwroot/your-domain/server/index.js`
   - **é¡¹ç›®è·¯å¾„ï¼š** `/www/wwwroot/your-domain`
   - **è¿è¡Œæ¨¡å¼ï¼š** `fork`
   - **Node ç‰ˆæœ¬ï¼š** é€‰æ‹© 18.x
5. ç‚¹å‡»"æäº¤"
6. é¡¹ç›®ä¼šè‡ªåŠ¨å¯åŠ¨

#### 7.2 ä½¿ç”¨å‘½ä»¤è¡Œé…ç½® PM2

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /www/wwwroot/your-domain

# å¯åŠ¨åç«¯æœåŠ¡
pm2 start server/index.js --name easypay-backend

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs easypay-backend

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save
```

---

### æ­¥éª¤ 8ï¼šé…ç½® Nginx åå‘ä»£ç†

#### 8.1 ä¿®æ”¹ç½‘ç«™é…ç½®

1. ç‚¹å‡»å·¦ä¾§"ç½‘ç«™"
2. æ‰¾åˆ°ä½ çš„ç½‘ç«™ï¼Œç‚¹å‡»"è®¾ç½®"
3. ç‚¹å‡»"é…ç½®æ–‡ä»¶"
4. æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹ï¼š

```nginx
server {
    listen 80;
    listen [::]:80;
    server_name your-domain.com www.your-domain.com;
    
    # å¦‚æœå·²é…ç½® SSLï¼Œå–æ¶ˆä¸‹é¢ä¸¤è¡Œæ³¨é‡Š
    # listen 443 ssl http2;
    # listen [::]:443 ssl http2;
    
    # SSL è¯ä¹¦è·¯å¾„ï¼ˆå®å¡”è‡ªåŠ¨é…ç½®ï¼‰
    # ssl_certificate /www/server/panel/vhost/cert/your-domain/fullchain.pem;
    # ssl_certificate_key /www/server/panel/vhost/cert/your-domain/privkey.pem;
    
    # æ ¹ç›®å½•ï¼ˆå‰ç«¯é™æ€æ–‡ä»¶ï¼‰
    root /www/wwwroot/your-domain/dist;
    index index.html;
    
    # è®¿é—®æ—¥å¿—
    access_log /www/wwwlogs/your-domain_access.log;
    error_log /www/wwwlogs/your-domain_error.log;
    
    # Gzip å‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml+rss application/json application/javascript;
    
    # é™æ€æ–‡ä»¶ç¼“å­˜
    location ~* \.(jpg|jpeg|png|gif|ico|css|js|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # API è¯·æ±‚ä»£ç†åˆ°åç«¯
    location /api/ {
        proxy_pass http://127.0.0.1:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        
        # è¶…æ—¶è®¾ç½®
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }
    
    # å‰ç«¯è·¯ç”±ï¼ˆSPAï¼‰
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # å®‰å…¨å¤´
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
}
```

5. ç‚¹å‡»"ä¿å­˜"
6. ç‚¹å‡»"é‡è½½é…ç½®"

#### 8.2 é…ç½® SSL è¯ä¹¦ï¼ˆæ¨èï¼‰

1. åœ¨ç½‘ç«™è®¾ç½®ä¸­ï¼Œç‚¹å‡»"SSL"
2. é€‰æ‹©"Let's Encrypt"
3. å‹¾é€‰ä½ çš„åŸŸå
4. ç‚¹å‡»"ç”³è¯·"
5. ç­‰å¾…è¯ä¹¦ç”³è¯·æˆåŠŸ
6. å¼€å¯"å¼ºåˆ¶ HTTPS"

---

### æ­¥éª¤ 9ï¼šé…ç½®é˜²ç«å¢™

#### 9.1 å®å¡”å®‰å…¨è®¾ç½®

1. ç‚¹å‡»å·¦ä¾§"å®‰å…¨"
2. ç¡®ä¿å¼€æ”¾ä»¥ä¸‹ç«¯å£ï¼š
   - 80ï¼ˆHTTPï¼‰
   - 443ï¼ˆHTTPSï¼‰
   - 8888ï¼ˆå®å¡”é¢æ¿ï¼‰
3. å…³é—­ä¸å¿…è¦çš„ç«¯å£ï¼š
   - 3000ï¼ˆåç«¯ç«¯å£ï¼Œåªå…è®¸æœ¬åœ°è®¿é—®ï¼‰
   - 27017ï¼ˆMongoDBï¼Œåªå…è®¸æœ¬åœ°è®¿é—®ï¼‰

#### 9.2 æœåŠ¡å™¨é˜²ç«å¢™

å¦‚æœä½¿ç”¨äº‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ï¼‰ï¼š
1. ç™»å½•äº‘æœåŠ¡å™¨æ§åˆ¶å°
2. é…ç½®å®‰å…¨ç»„è§„åˆ™
3. å¼€æ”¾ 80 å’Œ 443 ç«¯å£

---

### æ­¥éª¤ 10ï¼šéªŒè¯éƒ¨ç½²

#### 10.1 æ£€æŸ¥æœåŠ¡çŠ¶æ€

**æ£€æŸ¥ PM2ï¼š**
1. ç‚¹å‡»"è½¯ä»¶å•†åº—" â†’ "PM2 ç®¡ç†å™¨" â†’ "è®¾ç½®"
2. æŸ¥çœ‹ `easypay-backend` çŠ¶æ€æ˜¯å¦ä¸º"è¿è¡Œä¸­"

**æ£€æŸ¥ Nginxï¼š**
1. ç‚¹å‡»"è½¯ä»¶å•†åº—" â†’ "Nginx" â†’ "è®¾ç½®"
2. æŸ¥çœ‹çŠ¶æ€æ˜¯å¦ä¸º"è¿è¡Œä¸­"

**æ£€æŸ¥ MongoDBï¼š**
1. ç‚¹å‡»"è½¯ä»¶å•†åº—" â†’ "MongoDB" â†’ "è®¾ç½®"
2. æŸ¥çœ‹çŠ¶æ€æ˜¯å¦ä¸º"è¿è¡Œä¸­"

#### 10.2 æµ‹è¯•è®¿é—®

**æµ‹è¯•å‰ç«¯ï¼š**
```
https://your-domain.com
```

**æµ‹è¯• APIï¼š**
```
https://your-domain.com/api/settings/public
```

**æµ‹è¯•ç®¡ç†åå°ï¼š**
```
https://your-domain.com/login
```

---

## ğŸ“Š PM2 ç®¡ç†å‘½ä»¤

### åœ¨å®å¡”ç»ˆç«¯ä½¿ç”¨

```bash
# æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹
pm2 list

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
pm2 show easypay-backend

# æŸ¥çœ‹æ—¥å¿—
pm2 logs easypay-backend

# å®æ—¶æ—¥å¿—
pm2 logs easypay-backend --lines 100

# é‡å¯æœåŠ¡
pm2 restart easypay-backend

# åœæ­¢æœåŠ¡
pm2 stop easypay-backend

# åˆ é™¤æœåŠ¡
pm2 delete easypay-backend

# ç›‘æ§
pm2 monit

# æ¸…ç©ºæ—¥å¿—
pm2 flush
```

### åœ¨å®å¡” PM2 ç®¡ç†å™¨

1. ç‚¹å‡»"è½¯ä»¶å•†åº—" â†’ "PM2 ç®¡ç†å™¨" â†’ "è®¾ç½®"
2. æ‰¾åˆ° `easypay-backend`
3. å¯ä»¥è¿›è¡Œï¼š
   - é‡å¯
   - åœæ­¢
   - åˆ é™¤
   - æŸ¥çœ‹æ—¥å¿—
   - æŸ¥çœ‹ç›‘æ§

---

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å®å¡”æ–‡ä»¶ç®¡ç†å™¨

1. å¤‡ä»½ç°æœ‰ä»£ç 
2. ä¸Šä¼ æ–°ä»£ç 
3. é‡æ–°æ„å»ºå‰ç«¯ï¼š
   ```bash
   cd /www/wwwroot/your-domain
   npm run build
   ```
4. é‡å¯ PM2ï¼š
   ```bash
   pm2 restart easypay-backend
   ```

### æ–¹æ³•äºŒï¼šä½¿ç”¨ Git

```bash
cd /www/wwwroot/your-domain

# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# å®‰è£…æ–°ä¾èµ–
npm install --production

# é‡æ–°æ„å»ºå‰ç«¯
npm run build

# é‡å¯åç«¯
pm2 restart easypay-backend
```

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šPM2 å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶ï¼š**
PM2 æ˜¾ç¤º"é”™è¯¯"æˆ–"å·²åœæ­¢"

**è§£å†³ï¼š**
1. æŸ¥çœ‹æ—¥å¿—ï¼š
   ```bash
   pm2 logs easypay-backend --lines 50
   ```
2. æ£€æŸ¥ .env æ–‡ä»¶æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥ MongoDB æ˜¯å¦è¿è¡Œ
4. æ£€æŸ¥ç«¯å£ 3000 æ˜¯å¦è¢«å ç”¨ï¼š
   ```bash
   netstat -tlnp | grep 3000
   ```

### é—®é¢˜ 2ï¼šAPI è¯·æ±‚ 502 é”™è¯¯

**ç—‡çŠ¶ï¼š**
å‰ç«¯å¯ä»¥è®¿é—®ï¼Œä½† API è¯·æ±‚è¿”å› 502

**è§£å†³ï¼š**
1. æ£€æŸ¥ PM2 æ˜¯å¦è¿è¡Œï¼š
   ```bash
   pm2 status
   ```
2. æ£€æŸ¥åç«¯æ—¥å¿—ï¼š
   ```bash
   pm2 logs easypay-backend
   ```
3. æ£€æŸ¥ Nginx é…ç½®ä¸­çš„ä»£ç†åœ°å€æ˜¯å¦æ­£ç¡®ï¼ˆ`http://127.0.0.1:3000`ï¼‰

### é—®é¢˜ 3ï¼šå‰ç«¯é¡µé¢ç©ºç™½

**ç—‡çŠ¶ï¼š**
è®¿é—®ç½‘ç«™æ˜¾ç¤ºç©ºç™½é¡µé¢

**è§£å†³ï¼š**
1. æ£€æŸ¥ Nginx é…ç½®ä¸­çš„ root è·¯å¾„æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ dist ç›®å½•æ˜¯å¦å­˜åœ¨ï¼š
   ```bash
   ls -la /www/wwwroot/your-domain/dist
   ```
3. é‡æ–°æ„å»ºå‰ç«¯ï¼š
   ```bash
   npm run build
   ```

### é—®é¢˜ 4ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**ç—‡çŠ¶ï¼š**
åç«¯æ—¥å¿—æ˜¾ç¤º"MongoDB è¿æ¥å¤±è´¥"

**è§£å†³ï¼š**
1. æ£€æŸ¥ MongoDB æ˜¯å¦è¿è¡Œ
2. æ£€æŸ¥ .env ä¸­çš„ MONGODB_URI æ˜¯å¦æ­£ç¡®
3. æµ‹è¯•è¿æ¥ï¼š
   ```bash
   mongosh mongodb://localhost:27017/easypay
   ```

### é—®é¢˜ 5ï¼šç«¯å£è¢«å ç”¨

**ç—‡çŠ¶ï¼š**
PM2 å¯åŠ¨å¤±è´¥ï¼Œæç¤ºç«¯å£è¢«å ç”¨

**è§£å†³ï¼š**
1. æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹ï¼š
   ```bash
   netstat -tlnp | grep 3000
   ```
2. æ€æ­»è¿›ç¨‹ï¼š
   ```bash
   kill -9 <PID>
   ```
3. æˆ–ä¿®æ”¹ .env ä¸­çš„ PORT

---

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰
- [ ] å®å¡”é¢æ¿å·²å®‰è£…
- [ ] Node.js 18.x å·²å®‰è£…
- [ ] MongoDB å·²å®‰è£…å¹¶è¿è¡Œ
- [ ] PM2 ç®¡ç†å™¨å·²å®‰è£…
- [ ] åŸŸåå·²è§£æåˆ°æœåŠ¡å™¨

### éƒ¨ç½²ä¸­
- [ ] ä»£ç å·²ä¸Šä¼ åˆ° `/www/wwwroot/your-domain`
- [ ] .env æ–‡ä»¶å·²é…ç½®ï¼ˆå¯†é’¥å·²ä¿®æ”¹ï¼‰
- [ ] ä¾èµ–å·²å®‰è£…ï¼ˆ`npm install`ï¼‰
- [ ] å‰ç«¯å·²æ„å»ºï¼ˆ`npm run build`ï¼‰
- [ ] æ•°æ®åº“å·²åˆå§‹åŒ–ï¼ˆ`node server/scripts/initDatabase.js`ï¼‰
- [ ] PM2 å·²å¯åŠ¨ï¼ˆ`pm2 start server/index.js`ï¼‰
- [ ] Nginx å·²é…ç½®åå‘ä»£ç†
- [ ] SSL è¯ä¹¦å·²é…ç½®

### éƒ¨ç½²å
- [ ] ç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] API æ¥å£æ­£å¸¸å“åº”
- [ ] ç®¡ç†åå°å¯ä»¥ç™»å½•
- [ ] PM2 çŠ¶æ€æ˜¾ç¤º"è¿è¡Œä¸­"
- [ ] æ—¥å¿—æ²¡æœ‰é”™è¯¯ä¿¡æ¯

---

## ğŸ¯ å…³é”®è¦ç‚¹

### PM2 è¿è¡Œçš„æ–‡ä»¶

```bash
# æ­£ç¡®çš„å¯åŠ¨å‘½ä»¤
pm2 start server/index.js --name easypay-backend

# æˆ–ä½¿ç”¨å®Œæ•´è·¯å¾„
pm2 start /www/wwwroot/your-domain/server/index.js --name easypay-backend
```

**é‡è¦ï¼š**
- âœ… è¿è¡Œæ–‡ä»¶ï¼š`server/index.js`ï¼ˆåç«¯å…¥å£æ–‡ä»¶ï¼‰
- âŒ ä¸è¦è¿è¡Œï¼š`src/main.jsx`ï¼ˆå‰ç«¯æ–‡ä»¶ï¼Œå·²æ„å»ºåˆ° distï¼‰
- âŒ ä¸è¦è¿è¡Œï¼š`index.html`ï¼ˆé™æ€æ–‡ä»¶ï¼‰

### ç›®å½•ç»“æ„

```
/www/wwwroot/your-domain/
â”œâ”€â”€ dist/                    # å‰ç«¯æ„å»ºäº§ç‰©ï¼ˆNginx æœåŠ¡ï¼‰
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ assets/
â”œâ”€â”€ server/                  # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ index.js            # â† PM2 è¿è¡Œè¿™ä¸ªæ–‡ä»¶
â”‚   â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ models/
â”‚   â””â”€â”€ services/
â”œâ”€â”€ src/                     # å‰ç«¯æºç ï¼ˆä¸éœ€è¦ï¼‰
â”œâ”€â”€ .env                     # ç¯å¢ƒå˜é‡
â”œâ”€â”€ package.json
â””â”€â”€ node_modules/
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ PM2 æ—¥å¿—ï¼š`pm2 logs easypay-backend`
2. æŸ¥çœ‹ Nginx æ—¥å¿—ï¼š`/www/wwwlogs/your-domain_error.log`
3. æŸ¥çœ‹å®å¡”é¢æ¿æ—¥å¿—
4. å‚è€ƒå®Œæ•´éƒ¨ç½²æ–‡æ¡£ï¼š`ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—.md`

---

**éƒ¨ç½²æŒ‡å—ç‰ˆæœ¬ï¼š** v1.0  
**æœ€åæ›´æ–°ï¼š** 2026-02-03  
**é€‚ç”¨ç¯å¢ƒï¼š** å®å¡”é¢æ¿ 7.x+
